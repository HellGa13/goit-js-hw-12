{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/webp/Group.png","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nlet currentPage = 1;\n\nexport async function responseData(requestWords, additionalParams = {}) {\n  const requestParams = {\n    key: '49206664-0ec6b9af3cdb6ffe721ed5088',\n    q: requestWords,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n    ...additionalParams,\n  };\n\n  try {\n    const response = await axios.get('', { params: requestParams });\n    currentPage += 1;\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data from Pixabay API:', error);\n    throw error;\n  }\n}\n\nexport function resetPage() {\n  currentPage = 1;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Ініціалізація галереї\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionType: 'attr',\n  captionDelay: 250,\n  animationSpeed: 350,\n  captionPosition: 'bottom',\n});\n\n// Додаємо обробники подій на галерею\n//lightbox.on('show.simplelightbox', function () {});\n//lightbox.on('error.simplelightbox', function (e) {\n//  console.log(e);\n//});\n\n\n// Функція для оновлення SimpleLightbox\nexport function refreshLightbox() {\n  lightbox.refresh();\n}\n\nexport function renderImages(images) {\n  console.log('Дані для рендерингу:', images); // Додано для перевірки даних\n  const gallery = document.querySelector('.gallery');\n  const galleryArray = images.map(image => {\n    const {\n      webformatURL,\n      largeImageURL,\n      likes,\n      views,\n      tags,\n      comments,\n      downloads,\n    } = image;\n    const li = document.createElement('li');\n    li.classList.add('gallery-item');\n    const link = document.createElement('a');\n    link.classList.add('gallery-link');\n    link.href = largeImageURL;\n    const img = document.createElement('img');\n    img.classList.add('gallery-image');\n    img.src = webformatURL;\n    img.alt = tags;\n    img.width = 360;\n    img.height = 200;\n    li.appendChild(link);\n    link.appendChild(img);\n    const infoContainer = document.createElement('div');\n    infoContainer.classList.add('gallery-item-info');\n    infoContainer.innerHTML = `\n  <div class=\"item-info-container\">\n    <span class=\"description-name\">Likes</span>\n    <span class=\"description-counts\">${likes}</span>\n  </div>\n  <div class=\"item-info-container\">\n    <span class=\"description-name\">Views</span>\n    <span class=\"description-counts\">${views}</span>\n  </div>\n  <div class=\"item-info-container\">\n    <span class=\"description-name\">Comments</span>\n    <span class=\"description-counts\">${comments}</span>\n  </div>\n  <div class=\"item-info-container\">\n    <span class=\"description-name\">Downloads</span>\n    <span class=\"description-counts\">${downloads}</span>\n  </div>\n`;\n    li.appendChild(infoContainer);\n    return li;\n  });\n  gallery.append(...galleryArray);\n}\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEYSURBVHgBrZZRDoIwDIYrwfDqTeQo3ohxEr0BXsW77GXFOFdkYcC6DuFPCJB1/7fCWgBgZEzfIPY256BYzqfkzE8nUNbCE+DzgqSKK8W6OVBV5xYk+ZUbgw/IFMVKmfxtng3ZYy5CjjBnISlzrXUtGcZiZpDxolsGIWItvTi/OK0xAuk7GhsBRjEGioNMmffMXKNEAAeRzENACYJc8QxF5IuJNBZhS2PSfBGwhNB9rjmpgHxZ5jqprAyC3jT0mi29RwSE5v6xhO9EhAjblN0tqS38G59t02ShKeCzU2Kh+SDE9z0GAUGxGPKaLS4F2aqVudcRENb8CIhovgeSMl/VwdQWbOPOl5yPvivs25b2MWjKJOu3hTX+AgZ5PpvL0NSkAAAAAElFTkSuQmCC\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport 'loaders.css/loaders.min.css';\n\n// Імпорт функцій з файлів\nimport { responseData, resetPage } from './js/pixabay-api';\nimport { renderImages, clearGallery, refreshLightbox } from './js/render-functions';\n// Імпорт іконки\nimport iconSvgError from './img/webp/Group.png';\n\n// Елементи DOM\nconst form = document.querySelector('.form');\nconst loaderElement = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n// Налаштування повідомлень\nconst errorMesage = {\n  message: 'Sorry, there are no images matching your search query. Please try again!',\n  messageColor: '#fff',\n  backgroundColor: '#ef4040',\n  position: 'topRight',\n  iconUrl: iconSvgError,\n};\n\nconst endMessage = {\n  message: \"We're sorry, but you've reached the end of search results.\",\n  messageColor: '#fff',\n  backgroundColor: '#ef4040',\n  position: 'topRight',\n  iconUrl: iconSvgError,\n};\n\n// Змінні для пошуку\nlet totalHits = 0;\nlet loadedImages = 0;\nlet query = '';\n\n// Слухачі подій\nform.addEventListener('submit', searchImages);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\n// Функція для пошуку зображень\nasync function searchImages(event) {\n  event.preventDefault();\n  \n  // Отримуємо текст запиту\n  query = event.currentTarget.elements.searchQuery.value.trim();\n  if (!query) {\n    return;\n  }\n\n  loaderElement.classList.remove('visually-hidden');\n  clearGallery();\n  form.reset();\n  resetPage();\n\n  loadedImages = 0; // Скидаємо лічильник завантажених зображень\n\n  try {\n    const data = await responseData(query);\n    if (!data || !data.hits || data.hits.length === 0) {\n      iziToast.show(errorMesage);\n      loadMoreBtn.classList.add('visually-hidden');\n      return;\n    }\n\n    const images = data.hits;\n    totalHits = data.totalHits;\n    loadedImages = images.length;\n\n    renderImages(images);\n    refreshLightbox();\n    toggleLoadMoreButton(loadedImages, totalHits);\n  } catch (error) {\n    iziToast.show({\n      ...errorMesage,\n      message: `An error occurred: ${error.message}`,\n    });\n  } finally {\n    loaderElement.classList.add('visually-hidden');\n  }\n}\n\n// Функція для завантаження додаткових зображень\nasync function loadMoreImages() {\n  loaderElement.classList.remove('visually-hidden');\n  const galleryHeightBefore = gallery.scrollHeight;\n\n  try {\n    const data = await responseData(query);\n    if (!data || !data.hits || data.hits.length === 0) {\n      iziToast.show(errorMesage);\n      loadMoreBtn.classList.add('visually-hidden');\n      return;\n    }\n\n    const images = data.hits;\n    loadedImages += images.length;\n\n    renderImages(images);\n    refreshLightbox();\n\n    const galleryHeightAfter = gallery.scrollHeight;\n    window.scrollBy({\n      top: galleryHeightAfter - galleryHeightBefore,\n      behavior: 'smooth',\n    });\n\n    toggleLoadMoreButton(loadedImages, totalHits);\n  } catch (error) {\n    iziToast.show({\n      ...errorMesage,\n      message: `An error occurred: ${error.message}`,\n    });\n  } finally {\n    loaderElement.classList.add('visually-hidden');\n  }\n}\n\n// Функція для увімкнення/вимкнення кнопки \"Load More\"\nfunction toggleLoadMoreButton(loaded, total) {\n  if (loaded >= total) {\n    iziToast.show(endMessage);\n    loadMoreBtn.classList.add('visually-hidden');\n  } else {\n    loadMoreBtn.classList.remove('visually-hidden');\n  }\n}\n"],"names":["axios","currentPage","responseData","requestWords","additionalParams","requestParams","response","error","resetPage","lightbox","SimpleLightbox","refreshLightbox","renderImages","images","gallery","galleryArray","image","webformatURL","largeImageURL","likes","views","tags","comments","downloads","li","link","img","infoContainer","clearGallery","iconSvgError","form","loaderElement","loadMoreBtn","errorMesage","endMessage","totalHits","loadedImages","query","searchImages","loadMoreImages","event","data","iziToast","toggleLoadMoreButton","galleryHeightBefore","galleryHeightAfter","loaded","total"],"mappings":"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"}